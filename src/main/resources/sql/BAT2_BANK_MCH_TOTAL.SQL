--DROP TABLE MPOS.BAT2_BANK_MCH_TOTAL;
CREATE TABLE MPOS.BAT2_BANK_MCH_TOTAL
(
ID	DEC(20,0)	NOT NULL GENERATED ALWAYS AS IDENTITY (START WITH 1,INCREMENT BY 1,CACHE 100),
CRT_TM TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
MDF_TM TIMESTAMP NOT NULL GENERATED ALWAYS FOR EACH ROW ON UPDATE AS ROW CHANGE TIMESTAMP,
BATID DEC(20),
SMDT	CHAR(8) ,
BANK_CODE VARCHAR(32) WITH DEFAULT '',
CHANNEL_NO	VARCHAR(50) WITH DEFAULT '',
MY_MCH_NO	VARCHAR(50) WITH DEFAULT '',
MY_SEC_MCH_NO	VARCHAR(50) WITH DEFAULT '',
MY_SEC_MCH_NM	VARCHAR(100) WITH DEFAULT '',
ACNT DEC(12)  WITH DEFAULT 0,
ATRAM	DEC(15,2) WITH DEFAULT 0,
RCNT DEC(12)  WITH DEFAULT 0,
RTRAM	DEC(15,2) WITH DEFAULT 0,
TOTAL_FEE	DEC(15,2) WITH DEFAULT 0,
TTRAM	DEC(15,2) WITH DEFAULT 0,
RZAMT	DECIMAL(15,2)	DEFAULT 0,
TCNT DEC(12)  WITH DEFAULT 0,
MCHTP INT,
PRIMARY KEY (ID)
);

CREATE UNIQUE INDEX MPOS.BAT2_BANK_MCH_TOTAL_IDX_1  ON MPOS.BAT2_BANK_MCH_TOTAL (BATID, BANK_CODE, CHANNEL_NO, MY_MCH_NO, MY_SEC_MCH_NO, MCHTP);
CREATE INDEX MPOS.BAT2_BANK_MCH_TOTAL_IDX_2 ON MPOS.BAT2_BANK_MCH_TOTAL(SMDT);	

COMMENT ON TABLE MPOS.BAT2_BANK_MCH_TOTAL IS '多银行商户交易汇总表';

COMMENT ON MPOS.BAT2_BANK_MCH_TOTAL ( 
ID IS 'ID',
CRT_TM IS '入库时间戳',
MDF_TM IS '修改时间戳',
BATID IS '对账批次号,每次只对一个批次的对账数据汇总',
SMDT IS '汇总日期',
BANK_CODE IS '银行编号',
CHANNEL_NO IS '渠道',
MY_MCH_NO IS '一级商户号,对应渠道二级商户号',
MY_SEC_MCH_NO IS '二级商户号',
MY_SEC_MCH_NM IS '二级商户名称',
ACNT IS '正交易笔数',
ATRAM IS '正交易总金额',
RCNT IS '反交易笔数',
RTRAM IS '反交易总金额',
TOTAL_FEE IS '总手续费',
TTRAM IS '轧差金额',
RZAMT IS '商户入账金额',
TCNT IS '总笔数',
MCHTP IS '商户类型，1或者空=普通商入账'
);


--主库版本
--DROP TABLE MPOS.BAT2_BANK_MCH_TOTAL;
CREATE TABLE MPOS.BAT2_BANK_MCH_TOTAL
(
ID	DEC(20,0)	NOT NULL,
CRT_TM TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
MDF_TM TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
BATID DEC(20),
SMDT	CHAR(8) ,
BANK_CODE VARCHAR(32) WITH DEFAULT '',
CHANNEL_NO	VARCHAR(50) WITH DEFAULT '',
MY_MCH_NO	VARCHAR(50) WITH DEFAULT '',
MY_SEC_MCH_NO	VARCHAR(50) WITH DEFAULT '',
MY_SEC_MCH_NM	VARCHAR(100) WITH DEFAULT '',
ACNT DEC(12)  WITH DEFAULT 0,
ATRAM	DEC(15,2) WITH DEFAULT 0,
RCNT DEC(12)  WITH DEFAULT 0,
RTRAM	DEC(15,2) WITH DEFAULT 0,
TOTAL_FEE	DEC(15,2) WITH DEFAULT 0,
TTRAM	DEC(15,2) WITH DEFAULT 0,
RZAMT	DECIMAL(15,2)	DEFAULT 0,
TCNT DEC(12)  WITH DEFAULT 0,
MCHTP INT,
PRIMARY KEY (ID)
);

CREATE UNIQUE INDEX MPOS.BAT2_BANK_MCH_TOTAL_IDX_1  ON MPOS.BAT2_BANK_MCH_TOTAL (BATID, BANK_CODE, CHANNEL_NO, MY_MCH_NO, MY_SEC_MCH_NO, MCHTP);
CREATE INDEX MPOS.BAT2_BANK_MCH_TOTAL_IDX_2 ON MPOS.BAT2_BANK_MCH_TOTAL(SMDT);	

COMMENT ON TABLE MPOS.BAT2_BANK_MCH_TOTAL IS '多银行商户交易汇总表';

COMMENT ON MPOS.BAT2_BANK_MCH_TOTAL ( 
ID IS 'ID',
CRT_TM IS '入库时间戳',
MDF_TM IS '修改时间戳',
BATID IS '对账批次号,每次只对一个批次的对账数据汇总',
SMDT IS '汇总日期',
BANK_CODE IS '银行编号',
CHANNEL_NO IS '渠道',
MY_MCH_NO IS '一级商户号,对应渠道二级商户号',
MY_SEC_MCH_NO IS '二级商户号',
MY_SEC_MCH_NM IS '二级商户名称',
ACNT IS '正交易笔数',
ATRAM IS '正交易总金额',
RCNT IS '反交易笔数',
RTRAM IS '反交易总金额',
TOTAL_FEE IS '总手续费',
TTRAM IS '轧差金额',
RZAMT IS '商户入账金额',
TCNT IS '总笔数',
MCHTP IS '商户类型，1或者空=普通商入账'
);